machine:
  services:
    - docker
  java:
    version: oraclejdk8


dependencies:
  cache_directories:
    - "~/docker"

  override:
      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS

test:
  override:
    - ./build.sh


deployment:
  all:
    branch: /.*/
    commands:
      - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS 
      - docker push sillelien/scheduler:${CIRCLE_BRANCH}
